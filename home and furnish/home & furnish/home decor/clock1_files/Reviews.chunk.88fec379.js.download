(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./components/FiveStarWidget/FiveStarWidget.css":function(e,t,a){e.exports={"yellow-star":"wvjgRW","grey-star":"_3Hc5hn",rating:"kcuK2o",tooltip:"_14Na-3",star:"_2tZufY",ratingText:"_1Dk1bd",ratingText0:"XfETOX",ratingText1:"LV79LE",ratingText2:"sHUoTq",ratingText3:"_1jV6JI",ratingText4:"_3IFYIT"}},"./components/FiveStarWidget/FiveStarWidget.js":function(e,t,a){"use strict";var n=a("./node_modules/react/index.js"),r=a.n(n),i=a("./node_modules/react-redux/es/index.js"),o=a("./node_modules/classnames/index.js"),s=a.n(o),c=a("./components/Tooltip/index.tsx"),l=a("./strings.json"),u=a("./actions/tooltipActions.js"),d=a("./components/FiveStarWidget/FiveStarWidget.css"),p=a.n(d),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleRatingClick=function(e){return function(){var t=a.props.starCount-e;a.setState({selectedRating:t}),a.props.sendRating&&a.props.rateClicked(t),a.props.addRating&&a.props.addRatingClicked(t,a.props.pid)}},a.handleMouseOut=function(e){var t=a.props.hideTooltip;"function"==typeof t&&t(e)},a.state={selectedRating:e.selectedRating},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),v(t,[{key:"getTootipData",value:function(e){switch(e){case 0:return l.excellent;case 1:return l.veryGood;case 2:return l.good;case 3:return l.bad;case 4:return l.veryBad;default:return""}}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.starCount;t++){var a,n=s()(p.a.star,(m(a={},p.a["yellow-star"],t>this.props.starCount-1-this.state.selectedRating),m(a,p.a["grey-star"],t<this.props.starCount-this.state.selectedRating),a));e.push(r.a.createElement("span",{id:"star-"+t+"-"+this.props.id,onClick:this.handleRatingClick(t),className:n,key:t},"â˜…",r.a.createElement(c.a,{className:p.a.tooltip,anchor:"#star-"+t+"-"+this.props.id,position:"top",hoverInTimeout:0,hoverOutTimeout:0},this.getTootipData(t))))}var i=void 0;return this.state.selectedRating&&(i=this.props.starCount-parseInt(this.state.selectedRating,10)),r.a.createElement("div",null,r.a.createElement("div",{className:p.a.rating,onMouseOut:this.handleMouseOut},e),i>=0&&i<=4&&!this.props.addRating&&r.a.createElement("span",{className:s()(p.a.ratingText,p.a["ratingText"+i])},this.getTootipData(i)))}}]),t}();t.a=Object(i.b)(null,function(e){return{hideTooltip:u.c}})(g)},"./components/MinimalProductInfo/MinimalProductInfo.css":function(e,t,a){e.exports={"product-info":"_3wBtPi",name:"Sw6kZ2","rating-widget":"mBjPf6","image-container":"_2sxWXr",image:"hoZMHD"}},"./components/SimpleProductHeader/SimpleProductHeader.css":function(e,t,a){e.exports={"header-card":"_1Z9vji",title:"NWW_bH",arrow:"lVlJHX","product-info":"_2tw077"}},"./components/SimpleProductHeader/SimpleProductHeader.js":function(e,t,a){"use strict";a("./node_modules/prop-types/index.js");var n=a("./node_modules/react/index.js"),r=a.n(n),i=a("./node_modules/react-router/es/index.js"),o=a("./components/ProductRatingWidget/ProductRatingWidget.js"),s=a("./utils/getImageUrl.ts"),c=a("./components/MinimalProductInfo/MinimalProductInfo.css"),l=a.n(c),u=function(e){var t=e.rating,a=e.image,n=e.title,c=e.productUrl,u=Object(s.c)(a,48);return r.a.createElement(i.a,{to:c||""},r.a.createElement("div",{className:l.a["product-info"]},r.a.createElement("div",{className:l.a.name},r.a.createElement("span",null,n)),r.a.createElement("div",{className:l.a["rating-widget"]},r.a.createElement(o.a,{product:{value:{rating:t}},view:"minimal"}))),r.a.createElement("div",{className:l.a["image-container"]},r.a.createElement("img",{src:u,className:l.a.image})))},d=a("./components/Icons/Icons.tsx"),p=a("./components/SimpleProductHeader/SimpleProductHeader.css"),v=a.n(p),m=function(e){return r.a.createElement("div",{className:v.a["header-card"]},e.showBackBtn&&r.a.createElement("a",{href:"javascript:void(0)",onClick:function(t){e.router.goBack()},className:v.a.arrow},Object(d.c)()),r.a.createElement("div",{className:v.a.title},r.a.createElement("span",null,e.headerCaption)),r.a.createElement("div",{className:v.a["product-info"]},r.a.createElement(u,e)))};m.defaultProps={showBackBtn:!1};t.a=Object(i.e)(m)},"./components/Title/Title.js":function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"b",function(){return l});var n,r,i=a("./node_modules/react/index.js"),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var s=!0,c=(r=n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["Component"]),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.title,a=e.overrideServerTitle;!t||s&&!a||(document.title=t),s=!1}},{key:"shouldComponentUpdate",value:function(e){return this.props.title!==e.title}},{key:"componentDidUpdate",value:function(){this.props.title&&(document.title=this.props.title)}},{key:"render",value:function(){return null}}]),t}(),n.defaultProps={overrideServerTitle:!1},r);function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e||s&&!t||document.title===e||(document.title=e),s=!1}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css":function(e,t,a){e.exports={"review-rating-content":"_2vvRAH","loader-container":"_269OP5","error-container":"_39G8Ox","not-allowed-container":"_3KMsCk",overlay:"_2z2sqF","overlay-loader":"_3fX1k7"}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.js":function(e,t,a){"use strict";a.r(t);var n=a("./node_modules/react/index.js"),r=a.n(n),i=a("./node_modules/react-redux/es/index.js"),o=a("./node_modules/redux/es/index.js"),s=a("./node_modules/react-router/es/index.js"),c=a("./strings.json"),l=a("./components/Common/Loader/Loader.tsx"),u=a("./utils/asyncStatusHelper.ts"),d=a("./components/SimpleProductHeader/SimpleProductHeader.js"),p=a("./components/Toast/Toast.tsx"),v=a("./components/Error/Error.js"),m=a("./components/StringWidget/StringWidget.tsx"),g=a("./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css"),f=a.n(g),h=function(e){return r.a.createElement("div",{className:f.a["review-side-bar"]},r.a.createElement("div",{className:f.a.header},r.a.createElement(m.a,{strKey:"reviewSidebarHeading"})),r.a.createElement("div",{className:f.a.instructions},[{questionKey:"reviewSidebarQuestion_1",answerKey:"reviewSidebarAnswer_1"},{questionKey:"reviewSidebarQuestion_2",answerKey:"reviewSidebarAnswer_2"},{questionKey:"reviewSidebarQuestion_3",answerKey:"reviewSidebarAnswer_3",linkTextKey:"reviewSidebarLinkText_3",link:"/helpcentre"}].map(function(e,t){return r.a.createElement("div",{className:f.a.item,key:t},r.a.createElement("div",{className:f.a.question},r.a.createElement(m.a,{strKey:e.questionKey})),r.a.createElement("div",{className:f.a.answer},r.a.createElement(m.a,{strKey:e.answerKey}),e.linkTextKey&&r.a.createElement("a",{className:f.a.link,href:e.link,title:c[e.linkTextKey]},r.a.createElement(m.a,{strKey:e.linkTextKey}))))})))},b=(a("./node_modules/prop-types/index.js"),a("./components/FiveStarWidget/FiveStarWidget.js")),y=a("./node_modules/lodash/pick.js"),w=a.n(y),j=a("./node_modules/classnames/index.js"),O=a.n(j),R=a("./utils/shallowEqual.ts"),_=a("./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css"),E=a.n(_),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},P=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,valid:!0,errorMessage:""},a.onChangeHandler=a.onChangeHandler.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),P(t,[{key:"componentWillReceiveProps",value:function(e){var t=["value","valid","errorMessage"],a=w()(e,t);Object(R.a)(a,w()(this.props,t))||this.setState(a)}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){var e=this.state.value;this.setCurrentFieldState({value:e,focused:!1}),"textarea"===this.props.type&&this.props.onBlurComp(this.props.selectedRating,e)}},{key:"setCurrentFieldState",value:function(e){if(this.props.onChangeHandler){var t=this.props.onChangeHandler(e.value);this.setState(C({},e,t))}else this.setState(C({},e))}},{key:"onChangeHandler",value:function(e){this.setCurrentFieldState({value:e.target.value})}},{key:"getTextElement",value:function(){var e={onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeHandler,value:this.state.value,placeholder:this.props.placeholder,className:E.a.control};switch(this.props.type){case"text":return r.a.createElement("input",e);case"textarea":return r.a.createElement("textarea",C({rows:"8"},e));default:return null}}},{key:"render",value:function(){var e,t=this.state,a=t.valid,n=t.focused;return r.a.createElement("div",{className:O()(E.a["text-box"],(e={},S(e,E.a.error,!a),S(e,E.a.focused,n),e))},!a&&r.a.createElement("div",{className:O()(E.a["move-right"],E.a["error-text"])},r.a.createElement("span",null,this.state.errorMessage)),r.a.createElement("div",{className:E.a.label},r.a.createElement("span",null,this.props.label)),this.getTextElement())}}]),t}();x.defaultProps={value:"",validators:[],type:"text"};var k,T,A=x,N=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css"),D=a.n(N),H=a("./utils/validators.js"),W=a("./utils/safeTraverse.ts"),B=a("./actions/reviewPageTitleActions.js"),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},M=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var F=60,K=5e3,q=5,L=(k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));T.call(a);var n=Object(W.a)(e.reviewData,["title"])||"",r=Object(W.a)(e.reviewData,["text"])||"",i=Object(W.a)(e.reviewData,["author"])||"",o=e.rating&&e.rating<=q?e.rating:Object(W.a)(e.reviewData,["rating"])||"";return a.state={controls:{title:{value:n,valid:!0},description:{value:r,valid:!0},author:{value:i,valid:!0},rating:{value:o,valid:!0}}},a.validators={title:function(e){return{valid:Object(H.k)(e,F),message:c.reviewTitleMax,value:e.substring(0,F)}},description:function(e){var t={valid:Object(H.l)(e),message:c.reviewDescriptionEmpty};return t.valid&&(t={valid:Object(H.k)(e,K),message:c.reviewDescriptionMax,value:e.substring(0,K)}),t},rating:function(e){return{valid:Object(H.l)(e),message:c.reviewRatingEmpty}},author:function(e){return{valid:!0}}},a.setRating=a.setRating.bind(a),a.submitHandler=a.submitHandler.bind(a),a.titleChangeHandler=a.onChangeHandler("title").bind(a),a.descriptionChangeHandler=a.onChangeHandler("description").bind(a),a.authorChangeHandler=a.onChangeHandler("author").bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),M(t,[{key:"onChangeHandler",value:function(e){var t=this;return function(a){var n=void 0;return"function"==typeof t.validators[e]&&(n=t.validators[e](a),t.setState({controls:I({},t.state.controls,V({},e,I({value:a},n)))})),n}}},{key:"setRating",value:function(e){this.setState({controls:I({},this.state.controls,{rating:{valid:!0,value:e}})}),this.props.postRatingHandler(e)}},{key:"submitHandler",value:function(){var e=this,t=this.state.controls,a=t.title,n=t.description,r=t.author,i=t.rating,o=Object.keys(this.state.controls).reduce(function(t,a){var n,r=e.validators[a]?e.validators[a](e.state.controls[a].value):{valid:!0};return I({},t,(V(n={},a,I({},e.state.controls[a],r)),V(n,"valid",t.valid&&r.valid),n))},{valid:!0});this.setState({controls:o}),o.valid&&this.props.submitHandler({title:a.value,description:n.value,author:r.value,rating:i.value})}},{key:"getRatingWidget",value:function(){return r.a.createElement("div",{className:D.a["rating-widget"]},!this.state.controls.rating.valid&&r.a.createElement("div",{className:O()(D.a["rating-status"],D.a.error)},c.ratingEmpty),Object(u.j)(this.props.ratingStatus)&&r.a.createElement("div",{className:O()(D.a["rating-status"],D.a.success)},c.ratingSuccess),Object(u.g)(this.props.ratingStatus)&&r.a.createElement("div",{className:O()(D.a["rating-status"],D.a.error)},c.ratingError),r.a.createElement(b.a,{sendRating:!0,id:"add-rating",rateClicked:this.setRating,starCount:q,selectedRating:this.state.controls.rating.value}))}},{key:"getTitleBox",value:function(){var e=this.state.controls.title;return r.a.createElement(A,{value:e.value,type:"text",onChangeHandler:this.titleChangeHandler,placeholder:c.reviewTitlePlaceholder,label:c.reviewTitle,valid:e.valid,errorMessage:e.message})}},{key:"getDescriptionBox",value:function(){var e=this.state.controls.description;return r.a.createElement(A,{onBlurComp:this.handleAutoTitleCall,value:e.value,type:"textarea",onChangeHandler:this.descriptionChangeHandler,placeholder:c.reviewDescPlaceholder,label:c.reviewDescription,valid:e.valid,selectedRating:this.state.controls.rating.value,errorMessage:e.message})}},{key:"getAuthorBox",value:function(){return r.a.createElement(A,{value:this.state.controls.author.value,type:"text",onChangeHandler:this.authorChangeHandler,placeholder:c.reviewAuthorPlaceholder,label:c.reviewerName})}},{key:"render",value:function(){var e=this.props.hasAuthorName;return r.a.createElement("div",{className:D.a["rating-review-card"]},r.a.createElement("div",{className:D.a["rating-card"]},r.a.createElement("div",{className:D.a.caption},r.a.createElement(m.a,{strKey:"ratingCaption"})),this.getRatingWidget()),r.a.createElement("hr",{className:D.a["h-border"]}),r.a.createElement("div",{className:D.a["review-card"]},r.a.createElement("div",{className:D.a.caption},r.a.createElement(m.a,{strKey:"reviewCaption"})),r.a.createElement("div",{className:D.a["review-content"]},this.getDescriptionBox(),r.a.createElement("hr",{className:D.a["h-border"]}),this.getTitleBox(),!e&&r.a.createElement("div",null,r.a.createElement("hr",{className:D.a["h-border"]}),this.getAuthorBox()))),r.a.createElement("button",{className:D.a["submit-btn"],onClick:this.submitHandler},c.submit))}}]),t}(),T=function(){var e=this;this.handleAutoTitleCall=function(t,a){e.props.fetchProductReviewData(t,a).then(function(t){var a=Object(W.a)(t,["data","reviewTitle"]);e.setState({controls:I({},e.state.controls,{title:{valid:!0,value:a}})})})}},k),U={fetchProductReviewData:B.d},Z=Object(i.b)("",U)(L),G=a("./components/Title/Title.js"),X=a("./toasts.json"),J=a("./actions/ApiCaller.ts"),Q=a("./actions/BaseAjaxConfig.ts"),z="ADD_PRODUCT_RATING_REVIEW_REQUEST",Y="ADD_PRODUCT_RATING_REVIEW_SUCCESS",$="ADD_PRODUCT_RATING_REVIEW_ERROR";function ee(e){return function(t){return t({type:z}),J.a.post(Object.assign({},Q.a,{pathname:"/api/3/reviews/product",credentials:"include",acceptErrors:!0}),e).then(function(e){return t(function(e){return{type:Y,data:e}}(e.RESPONSE))},function(e){return t(function(e){return{type:$,error:e}}(e)),Promise.reject(e.RESPONSE||e)})}}var te=a("./actions/reviewsConfirmationPageActions.js"),ae=a("./actions/productSummaryActions.js"),ne=a("./actions/reviewPageActions.js"),re=a("./utils/omnitureHelper.js"),ie=a("./utils/FDPHelper.ts"),oe=a("./utils/perfBeacon.ts"),se=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css"),ce=a.n(se),le=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ue=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={overlay:!1,ratingStatus:"",reviewData:null},a.submit=a.submit.bind(a),a.postRating=a.postRating.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),le(t,[{key:"componentDidMount",value:function(){Object(oe.a)({prefix:"des",sampleRate:.2});var e=this.props.productId;this.props.fetchReviewData(e),this.props.productSummary||this.props.fetchProductSummary([{productId:e}])}},{key:"postRating",value:function(e){var t=this,a=Object(W.a)(this.props,["location","query","source"]);this.props.postProductRating(this.props.productId,e,a).then(function(e){t.setState({ratingStatus:"SUCCESS"});var a=t.props.productSummary;if(a){var n=[],r={},i=Object(W.a)(a,["value","id"]),o=Object(W.a)(a,["value","rating","count"]);r.eVar16=r.prop16=Object(W.a)(a,["value","analyticsData","superCategory"]),r.eVar17=r.prop17=Object(W.a)(a,["value","analyticsData","subCategory"]),r.eVar19=r.prop19=Object(W.a)(a,["value","analyticsData","vertical"]),r.products=";"+i+";;;;eVar22="+Object(W.a)(a,["value","analyticsData","superCategory"])+"| eVar19="+r.eVar19,0===o&&n.push("event50"),n.push("event34"),r.events=n.join(","),re.a.trackLink(r,"Rating added")}},function(e){return t.setState({ratingStatus:"ERROR"}),Promise.reject(e)})}},{key:"componentWillReceiveProps",value:function(e){this.sendToAnalytics(e)}},{key:"sendToAnalytics",value:function(e){var t=e.productSummary,a=e.location,n=e.userState;if(Object(u.j)(t)&&!this.isAnalyticsSend){var r="WriteReview: "+Object(W.a)(t,["value","titles","title"]);ie.a.setNavigationContext({pn:"WriteReview",pt:r,mpid:ie.a.getMarketPlaceId(a)}),ie.a.trackPageView();var i=[],o={};o.eVar16=o.prop16=Object(W.a)(t,["value","analyticsData","superCategory"]),o.eVar17=o.prop17=Object(W.a)(t,["value","analyticsData","subCategory"]),o.eVar19=o.prop19=Object(W.a)(t,["value","analyticsData","vertical"]),o.products=";"+Object(W.a)(t,["value","id"])+";;;;eVar22="+Object(W.a)(t,["value","analyticsData","category"])+"|eVar19="+o.eVar19,i.push("event1");var s=Object.assign({},re.a.getBaseOmnitureFields({pageName:"Write Review",pageType:"Write Review: "+Object(W.a)(t,["value","titles","title"]),location:a,userState:n}),o,{events:i.join(",")});re.a.trackOmniturePageView(s),this.isAnalyticsSend=!0}}},{key:"submit",value:function(e){var t=this,a=this.props.userState,n=a.firstName,r=a.lastName,i=n||r?n+" "+r:e.author,o=Object(W.a)(this.props,["location","query","source"]),s={title:e.title,rating:e.rating,text:e.description,productId:this.props.productId,isCompleted:!0,author:i,source:o},c=this.props.productSummary;this.setState({showOverlay:!0}),this.props.AddProductRatingAndReview(s).then(function(e){var a=[],n={},r=Object(W.a)(c,["value","id"]),i=Object(W.a)(c,["value","rating","reviewCount"]);n.prop16=Object(W.a)(c,["value","analyticsData","superCategory"]),n.prop17=Object(W.a)(c,["value","analyticsData","subCategory"]),n.prop19=n.eVar19=Object(W.a)(c,["value","analyticsData","vertical"]),n.products=";"+r+";;;;eVar22="+Object(W.a)(c,["value","analyticsData","superCategory"])+"| eVar19="+n.eVar19,a.push("event33"),0===i&&a.push("event51"),n.prop47="Write Review Page",n.events=a.join(","),re.a.trackLink(n,"Review Submitted"),t.setState({showOverlay:!1}),t.props.toast.show(X.reviewConfirmationToast),t.props.router.push(Object(W.a)(e,["data","url"]))},function(e){t.setState({showOverlay:!1}),t.props.toast.show({message:e.message||e.ERROR_MESSAGE,level:"ERROR"})})}},{key:"render",value:function(){var e=this.props,t=e.productSummary,a=e.userState,n=e.reviewData,i=e.rating,o=Object(W.a)(n,["isCertifiedBuyer"])||!1;if(Object(u.j)(t)&&Object(u.j)(n)){var s=t.value;return r.a.createElement("div",{className:ce.a["review-rating-content"]},r.a.createElement(G.a,{title:c.homePageTitle,overrideServerTitle:!0}),s&&r.a.createElement(d.a,{headerCaption:c.ratingAndReview,image:Object(W.a)(s,["media","images",0,"url"]),title:Object(W.a)(s,["titles","title"]),rating:Object(W.a)(s,["rating"]),productUrl:Object(W.a)(s,["baseUrl"])}),r.a.createElement(h,null),o&&r.a.createElement(Z,{submitHandler:this.submit,hasAuthorName:!(!a.firstName&&!a.lastName),postRatingHandler:this.postRating,ratingStatus:this.state.ratingStatus,reviewData:n,rating:i}),!o&&r.a.createElement("div",{className:ce.a["not-allowed-container"]},r.a.createElement(v.a,{errorType:"error404",title:"",subtitle:c.reviewNotAllowed})),this.state.showOverlay&&r.a.createElement("div",{className:ce.a.overlay},r.a.createElement(l.a,{className:ce.a["overlay-loader"]})))}return Object(u.g)(t)||Object(u.g)(n)?r.a.createElement("div",{className:ce.a["error-container"]},r.a.createElement(v.a,null)):r.a.createElement("div",{className:ce.a["loader-container"]},r.a.createElement(l.a,null))}}]),t}();var de=Object(i.b)(function(e,t){var a=t.location.query.pid,n=t.location.query.rating;return{productSummary:e.productSummary[a],reviewData:e.reviewPageData,userState:e.userState,productId:a,rating:n}},function(e){return Object(o.bindActionCreators)({AddProductRatingAndReview:ee,fetchReviewData:ne.d,fetchProductSummary:ae.d,postProductRating:te.e},e)})(ue);t.default=Object(p.d)(Object(s.e)(de))},"./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css":function(e,t,a){e.exports={"rating-review-card":"_2rfo2u","submit-btn":"_3oe6G6","review-card":"_3zS_0H","rating-card":"_3AwHsn",caption:"_1O_Sj9","rating-status":"_3lM63h",error:"Huglld",success:"_1tudS1","rating-widget":"Kj7FZF","review-content":"_2ynvot","text-box":"_1b7zWX","description-box":"_2Vq_k8",label:"_1huZCe",control:"_2lNh_V","h-border":"_2qU1N7","move-right":"_1v1y1A"}},"./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css":function(e,t,a){e.exports={"review-side-bar":"_1ZCgAu",header:"_3SyFhG",instructions:"_1gZBWY",item:"_13cTJo",question:"_1RrlUn",answer:"_20QwAZ",link:"_1vqsw_"}},"./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css":function(e,t,a){e.exports={"text-box":"_32o8JY",error:"_2o5VpG",label:"_1AyhZ5","error-text":"_1aV0fV",control:"_16nh-W",focused:"ofBQLv","description-box":"_2onsaO","move-right":"_3bf835"}},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css":function(e,t,a){e.exports={"reviews-confirmation-page-margin":"_3X6CC3","reviews-confirmation-content":"_1hhliZ","page-title":"owgplv","no-products-text":"_1Zk21-","product-card":"_3sw6Ub","product-image-container":"P3ETrn","product-title":"_2hU8nC","write-review-link":"_3cPzR5",clearfix:"_1XsgH5"}},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.js":function(e,t,a){"use strict";a.r(t);var n=a("./node_modules/react/index.js"),r=a.n(n),i=a("./node_modules/react-redux/es/index.js"),o=a("./node_modules/classnames/index.js"),s=a.n(o),c=a("./utils/perfBeacon.ts"),l=a("./node_modules/react-router/es/index.js"),u=a("./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css"),d=a.n(u),p=a("./utils/asyncStatusHelper.ts"),v=a("./components/Common/Card/index.ts"),m=a("./components/FiveStarWidget/FiveStarWidget.js").a,g=a("./components/Title/Title.js"),f=a("./actions/reviewsConfirmationPageActions.js"),h=a("./utils/safeTraverse.ts"),b=a("./components/Common/Image/SimpleImage.tsx"),y=a("./utils/getImageUrl.ts"),w=a("./components/StringWidget/index.ts"),j=a("./components/Common/Loader/Loader.tsx"),O=a("./utils/omnitureHelper.js"),R=a("./actions/modalActions.js"),_=a("./strings.json"),E=a("./utils/smartLoginHelper.js"),C=a("./actions/loginSignupActions.js"),P=a("./components/Toast/Toast.tsx");a.d(t,"default",function(){return A});var S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleLogin=function(){var e=a.props,t=e.showModal,n=e.makeLoginRequest,r={showModal:t,toast:e.toast,makeLoginRequest:n,omnitureData:{source:"ReviewsConfirmation",page:"NA"}};Object(E.b)(r)},a.rateClicked=a.rateClicked.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),S(t,[{key:"componentDidMount",value:function(){if(Object(h.a)(this.props,["userState","isLoggedIn"])){var e=Object(h.a)(this.props,["location","query","source"]);this.props.fetchReviewsConfirmationPageData(0,5,e);var t=Object.assign({},O.a.getBaseOmnitureFields({pageName:"Review My Purchases",pageType:"Review My Purchases",location:this.props.location,userState:this.props.userState}),{events:"event1"});Object(c.a)({prefix:"des",sampleRate:.2}),O.a.trackOmniturePageView(t)}else this.handleLogin()}},{key:"rateClicked",value:function(e,t){var a=[],n={},r=Object(h.a)(this.props,["location","query","source"]);a.push("event34"),n.prop46="RMP",n.prop4="Review My Purchase",n.events=a.join(","),O.a.trackLink(n,"RMP Rating added"),this.props.postProductRating(e,t,r)}},{key:"onClickHandler",value:function(e){Object(h.a)(this.props,["userState","isLoggedIn"])?this.props.router.push(e):this.handleLogin()}},{key:"render",value:function(){var e=this,t=Object(h.a)(this.props,["reviewsConfirmationData","product"]);return Object(p.j)(this.props.reviewsConfirmationData)?r.a.createElement("div",null,r.a.createElement(g.a,{title:_.reviewsConfirmationPageTitle}),r.a.createElement(v.a,{className:d.a["reviews-confirmation-content"]},r.a.createElement("div",{className:s()(d.a["page-title"])},r.a.createElement(w.a,{strKey:"reviewYourPurchases"})),t&&t.length<1?r.a.createElement("div",{className:d.a["no-products-text"]},r.a.createElement(w.a,{strKey:"confirmationNoProducts"})):null,t&&t.map(function(t,a){return r.a.createElement("div",{key:a,className:d.a["product-card"]},r.a.createElement("div",{className:d.a["product-image-container"]},r.a.createElement(b.a,{src:Object(y.c)(t.dynamicImageUrl,232,90),size:232})),r.a.createElement("div",{className:d.a["product-title"]},t.productTitle),r.a.createElement("div",{className:d.a.clearfix},r.a.createElement(m,{sendRating:!0,rateClicked:e.rateClicked.bind(e,t.pid),starCount:5,selectedRating:t.rating})),t.writeUrl?r.a.createElement("div",{onClick:e.onClickHandler.bind(e,t.writeUrl),className:d.a["write-review-link"]},r.a.createElement(w.a,{strKey:"writeAReviewLink"})):null)}))):r.a.createElement("div",{className:d.a["reviews-confirmation-content"]},r.a.createElement(v.a,null,r.a.createElement(j.a,null)))}}]),t}(),k={fetchReviewsConfirmationPageData:f.d,postProductRating:f.e,showModal:R.d,makeLoginRequest:C.G},T=Object(i.b)(function(e){return{reviewsConfirmationData:e.reviewsConfirmationPage,userState:e.userState}},k)(Object(l.e)(Object(P.d)(x)));function A(e){return r.a.createElement("div",{className:d.a["reviews-confirmation-page-margin"]},r.a.createElement(T,e))}},"./utils/perfBeacon.ts":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("./node_modules/fk-cp-perf-beacon/index.js"),r=a.n(n),i=a("./utils/localStorage.js");function o(e){Object(i.b)("localStorage")&&Object(i.b)("sessionStorage")&&r()(e)}}}]);